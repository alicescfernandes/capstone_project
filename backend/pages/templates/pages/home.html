{% extends 'pages/base.html' %}
{% load static %}
{% load custom_tags %}

{% block title %}Home - Dashboard{% endblock %}

{% block extra_head %}
<script src='https://unpkg.com/plotly.js-dist-min@3.0.1/plotly.min.js'></script>

<link rel="stylesheet" href="{% static 'css/page_home.css' %}">

<script type="module" src="{% static 'js/chart_webcomponent.js' %}"></script>
<script defer src="{% static 'js/page_home.js' %}"></script>

{% endblock %}

{% block content %}

{% include 'sections/empty-message.html' %}

{% if not empty %}

<div class="flex gap-10">
  <aside class="w-50 shrink-0 hidden lg:block text-sm text-gray-700">
    <h2 class="font-semibold text-gray-800 mb-3 text-2xl">Available Sections</h2>
    <ul class="space-y-2">
        {% for slug, name in section_titles.items %}      
        <li>
          <a href="?section={{ slug }}"
            class="block hover:underline {% if slug == selected_section_slug %}text-blue-700{% else %}text-black{% endif %}" >
            {{ name }}
          </a>
        </li>
      {% endfor %}
    </ul>
  </aside>

  <main class="flex-1">
      <div class="mb-12">
        <h2 class="text-2xl font-semibold mb-4 {% if forloop.first %}first{% endif %}">
          {{ selected_section_title }}
        </h2>
        
        <div class="grid grid-cols-8 gap-4">
            {% for chart in selected_charts %}
            <plotly-chart chart_slug="{{ chart.slug }}" q="{{ chart.quarter_number }}"></plotly-chart>
          {% endfor %}
        </div>
    </div>

  </main>
</div>

{% include 'sections/scroll-to-top.html' %}

{% endif %}

{% endblock %}